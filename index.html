<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QC検定4級 e-learning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', 'Noto Serif JP', serif;
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .quiz-container, .start-screen {
            background-color: #2d3748;
            border: 1px solid #4a5568;
        }
        .question-card {
            background-color: #4a5568;
            border-left: 5px solid #d69e2e; /* gold-500 */
        }
        .btn {
            transition: all 0.3s ease;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .btn-primary {
            background-color: #d69e2e;
            color: #1a202c;
        }
        .btn-primary:hover {
            background-color: #b7791f;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(214, 158, 46, 0.2);
        }
        .btn-secondary {
            background-color: #4a5568;
            color: #e2e8f0;
            border-color: #718096;
        }
        .btn-secondary:hover {
            background-color: #718096;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(113, 128, 150, 0.2);
        }
        .option-label {
            border: 2px solid #718096;
            transition: all 0.2s ease;
        }
        .option-label:hover {
            background-color: #4a5568;
            border-color: #d69e2e;
        }
        input[type="radio"]:checked + .option-label {
            background-color: #b7791f;
            border-color: #d69e2e;
            color: #ffffff;
        }
        .result-card {
            border-left-width: 5px;
        }
        .result-correct {
            background-color: rgba(56, 161, 105, 0.1); /* green-500 */
            border-left-color: #38a169;
        }
        .result-incorrect {
            background-color: rgba(229, 62, 62, 0.1); /* red-500 */
            border-left-color: #e53e3e;
        }
        .explanation {
            background-color: #2d3748;
            border-top: 1px dashed #718096;
        }
        .incorrect-explanation {
            background-color: rgba(229, 62, 62, 0.15);
            border-top: 1px dashed #e53e3e;
        }
        #result-summary {
            background: linear-gradient(135deg, #d69e2e, #b7791f);
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold font-serif text-white">QC検定4級</h1>
            <p class="text-lg text-gray-400 mt-2">社内e-learningコンテンツ</p>
        </header>

        <div id="start-screen" class="start-screen p-8 rounded-lg shadow-2xl text-center">
            <h2 class="text-2xl font-bold mb-6">学習モードを選択してください</h2>
            <div class="flex flex-col sm:flex-row justify-center gap-4 flex-wrap">
                <button id="start-random-btn" class="btn btn-primary">【ランダムで挑戦】</button>
                <button id="start-all-btn" class="btn btn-secondary">【全問に挑戦】</button>
                <button id="start-qc7-btn" class="btn btn-secondary">【QC七つ道具 特化問題】</button>
            </div>
        </div>

        <main id="quiz-container" class="quiz-container p-6 sm:p-8 rounded-lg shadow-2xl hidden">
            <!-- Questions will be dynamically inserted here -->
        </main>

        <div id="result-container" class="hidden mt-8">
            <!-- Results will be dynamically inserted here -->
        </div>

        <div id="button-container" class="text-center mt-8 space-y-4 hidden">
            <button id="submit-btn" class="btn btn-primary w-full sm:w-auto">採点する</button>
            <div id="retry-buttons" class="flex flex-col sm:flex-row justify-center gap-4 flex-wrap">
                <button id="retry-btn" class="btn btn-secondary hidden w-full sm:w-auto">【ランダムで再挑戦】</button>
                <button id="all-questions-btn" class="btn btn-secondary hidden w-full sm:w-auto">【全問に再挑戦】</button>
                <button id="retry-qc7-btn" class="btn btn-secondary hidden w-full sm:w-auto">【QC七つ道具で再挑戦】</button>
            </div>
             <div id="export-buttons" class="flex flex-col sm:flex-row justify-center gap-4 flex-wrap">
                <button id="pdf-btn" class="btn btn-secondary hidden w-full sm:w-auto">PDFで出力</button>
                <button id="csv-btn" class="btn btn-secondary hidden w-full sm:w-auto">CSVで出力</button>
            </div>
        </div>
    </div>

    <script>
        const allQuestions = [
            // Original 100 questions
            { "id": 1, "question": "品質管理検定（QC検定）4級の主な対象者は誰ですか？", "options": { "A": "品質管理の専門家", "B": "経営層", "C": "品質管理を初めて学ぶ人や、企業・組織で働くすべての人々", "D": "品質管理部門のリーダー" }, "answer": "C", "explanations": { "A": "品質管理の専門家は、より上位の級（例: 2級や1級）の対象者となります。", "B": "経営層も品質管理の知識は必要ですが、4級はより実践的な担当者や初学者を主な対象としています。", "C": "QC検定4級は、品質管理を初めて学ぶ人や、企業、組織に所属し、そこで働くすべての人々を対象としています。", "D": "品質管理部門のリーダーは、より専門的な知識が求められるため、3級以上の内容が適しています。" } },
            { "id": 2, "question": "品質とは一般的にどのように定義されますか？", "options": { "A": "価格の安さ", "B": "機能の多さ", "C": "使用目的を満たしている程度（fitness for use）", "D": "最新技術の導入度" }, "answer": "C", "explanations": { "A": "価格の安さは「コスト」の側面であり、品質の直接的な定義ではありません。", "B": "機能の多さは製品の「仕様」の一部ですが、それが顧客の目的に合致していなければ品質が高いとは言えません。", "C": "品質とは、「使用目的を満たしている程度（fitness for use）」と定義され、顧客の期待を満たし顧客満足を得ることが重要です。", "D": "最新技術の導入は製品の魅力の一つですが、それが品質を保証するわけではありません。" } },
            { "id": 3, "question": "品質に関する問題は、理想と現実の間に何が生じることと捉えられますか？", "options": { "A": "利益", "B": "ギャップ", "C": "成功", "D": "競争" }, "answer": "B", "explanations": { "A": "利益は企業活動の結果であり、問題そのものではありません。", "B": "品質に関する問題は、あるべき姿（理想）と現状（現実）の間に生じる「ギャップ」と捉えられます。このギャップを埋めるのが問題解決です。", "C": "成功は目標達成の状態であり、問題とは逆の概念です。", "D": "競争は市場環境であり、品質問題の直接的な定義ではありません。" } },
            { "id": 4, "question": "品質管理活動の基本的な二つの活動は何と何ですか？", "options": { "A": "計画と実行", "B": "分析と評価", "C": "維持と改善", "D": "報告と連絡" }, "answer": "C", "explanations": { "A": "計画と実行はPDCAサイクルの一部ですが、品質管理活動の二大要素ではありません。", "B": "分析と評価は改善活動の中で行われる重要なプロセスです。", "C": "品質管理は、決まった水準を保つ「維持」活動と、より良くしていく「改善」活動の二つが基本的な柱となります。", "D": "報告と連絡は、組織で仕事を進める上での重要なコミュニケーション手段です。" } },
            { "id": 5, "question": "業務改善を継続的に進めるためのサイクルで、「計画（Plan）→実行（Do）→確認（Check）→処置（Act）」の4段階を繰り返すものは何ですか？", "options": { "A": "SDCAサイクル", "B": "DMAICサイクル", "C": "PDCAサイクル", "D": "QCストーリー" }, "answer": "C", "explanations": { "A": "SDCAサイクルは、標準化（Standardize）→実行（Do）→確認（Check）→処置（Act）のサイクルで、主に「維持」活動で使われます。", "B": "DMAICはシックスシグマで用いられる改善手法のフレームワークです。", "C": "PDCAサイクルは、計画→実行→確認→処置の4段階を繰り返すことで、継続的な業務改善を行うための代表的なフレームワークです。", "D": "QCストーリーは、問題解決の手順を体系的にまとめたもので、PDCAサイクルを具体的に回すための一つの方法です。" } },
            { "id": 6, "question": "決まった良いやり方（標準）を維持し、定着させるためのサイクルは何ですか？", "options": { "A": "PDCAサイクル", "B": "SDCAサイクル", "C": "QCストーリー", "D": "5W1H" }, "answer": "B", "explanations": { "A": "PDCAサイクルは主に「改善」活動で使われるフレームワークです。", "B": "SDCAサイクルは、標準化（Standardize）→実行（Do）→確認（Check）→処置（Act）のサイクルで、決まったやり方を維持・定着させる「維持」活動で使われます。", "C": "QCストーリーは問題解決の手順を示したものです。", "D": "5W1Hは情報を整理するためのフレームワークです。" } },
            { "id": 7, "question": "問題解決や改善活動を体系的かつ効率的に進めるための手順（ステップ）を何と呼びますか？", "options": { "A": "PDCAサイクル", "B": "SDCAサイクル", "C": "QCストーリー", "D": "QC七つ道具" }, "answer": "C", "explanations": { "A": "PDCAサイクルは改善の基本的な考え方・枠組みです。", "B": "SDCAサイクルは維持活動の基本的な枠組みです。", "C": "QCストーリーは、テーマ選定から効果の確認、標準化までの一連の問題解決の手順を物語のようにまとめたものです。", "D": "QC七つ道具は、QCストーリーの各ステップでデータを分析するために使われるツール群です。" } },
            { "id": 8, "question": "多くの問題の中から、影響が大きい少数の問題を優先して解決するという考え方を何と呼びますか？", "options": { "A": "全面解決", "B": "重点指向の考え方", "C": "全員参加", "D": "段階的アプローチ" }, "answer": "B", "explanations": { "A": "全面解決は理想ですが、資源は有限なため、優先順位付けが必要です。", "B": "重点指向の考え方とは、多くの問題の中から、影響が大きい少数の問題（重点問題）を優先して解決するという考え方です。パレート図がこの考え方に基づいています。", "C": "全員参加は品質管理を進める上での心構えの一つです。", "D": "段階的アプローチは改善の進め方の一つですが、優先順位付けの考え方そのものではありません。" } },
            { "id": 9, "question": "業務のやり方を定めて維持することで、品質と効率の安定化を図る活動は何ですか？", "options": { "A": "改善", "B": "標準化", "C": "検査", "D": "データ分析" }, "answer": "B", "explanations": { "A": "改善は、現状をより良くする活動です。", "B": "標準化は、業務のやり方（標準）を定め、それを守ることで、誰がやっても同じ結果を出せるようにし、品質と効率の安定化を図る活動です。", "C": "検査は、出来上がった製品が基準を満たしているかを確認する活動です。", "D": "データ分析は、問題解決や改善のために行う情報収集・解析活動です。" } },
            { "id": 10, "question": "標準化活動のメリットとして最も不適切なものはどれですか？", "options": { "A": "作業ミスの防止", "B": "品質安定化", "C": "能率向上", "D": "業務の属人化" }, "answer": "D", "explanations": { "A": "標準化により作業手順が明確になるため、作業ミスが減ります。", "B": "標準化により作業のばらつきが減り、品質が安定します。", "C": "標準化により無駄な作業が減り、能率が向上します。", "D": "業務の属人化とは「その人でなければできない」状態のことで、標準化はむしろこの属人化を防ぎ、誰でも作業できるようにすることを目的とします。" } },
            { "id": 11, "question": "製品やサービスが仕様や基準を満たしているかを確認する活動は何ですか？", "options": { "A": "改善", "B": "標準化", "C": "検査", "D": "測定" }, "answer": "C", "explanations": { "A": "改善は現状をより良くする活動です。", "B": "標準化は業務のやり方を定める活動です。", "C": "検査は、製品やサービスが定められた仕様や基準を満たしているかを、測定、試験などを行って判定する活動です。", "D": "測定は、検査活動の一部として行われる、具体的な数値を測る行為です。" } },
            { "id": 12, "question": "製品やサービスを作り出すための一連の活動や工程を指す言葉は何ですか？", "options": { "A": "成果", "B": "プロセス", "C": "品質", "D": "目標" }, "answer": "B", "explanations": { "A": "成果はプロセスの結果として生み出されるものです。", "B": "プロセスとは、インプット（材料や情報など）をアウトプット（製品やサービス）に変換する、一連の活動や工程（仕事の流れ）を指します。", "C": "品質はプロセスの結果であるアウトプットの出来栄えを評価する指標です。", "D": "目標はプロセスが目指すべき水準です。" } },
            { "id": 13, "question": "プロセスを構成する主要な要素として挙げられる「4M」は何ですか？", "options": { "A": "Man, Money, Market, Management", "B": "Man, Machine, Material, Method", "C": "Measurement, Maintenance, Motivation, Management", "D": "Map, Model, Market, Manpower" }, "answer": "B", "explanations": { "A": "Money（お金）やMarket（市場）は経営資源ですが、プロセスの直接的な構成要素の4Mには含まれません。", "B": "プロセスの品質に影響を与える4つの主要な要素として、人（Man）、機械・設備（Machine）、材料（Material）、方法（Method）があり、これらを総称して4Mと呼びます。", "C": "Measurement（測定）やMaintenance（保全）は4MのMethodやMachineに関連する要素です。", "D": "これらは4Mの一般的な定義ではありません。" } },
            { "id": 14, "question": "客観的な事実に基づいた判断を行うための定量的情報を何と呼びますか？", "options": { "A": "経験", "B": "直感", "C": "推測", "D": "データ" }, "answer": "D", "explanations": { "A": "経験は重要ですが、客観的な判断のためにはデータによる裏付けが必要です。", "B": "直感は主観的なものであり、事実に基づく判断とは異なります。", "C": "推測はデータがない場合に行うもので、事実そのものではありません。", "D": "データとは、客観的な事実に基づいた判断を行うための、数値や記号で表された定量的な情報のことです。品質管理は事実（データ）に基づいて管理を行います。" } },
            { "id": 15, "question": "データの種類で、不良品数やクレーム件数のように数えられるものを何と呼びますか？", "options": { "A": "計数値データ", "B": "計量値データ", "C": "連続データ", "D": "分類データ" }, "answer": "A", "explanations": { "A": "計数値データは、個数や件数、回数など、数えて得られる離散的な値のデータです。不良品の数や事故の件数などが該当します。", "B": "計量値データは、長さや重さなど、連続的な量を測定して得られるデータです。", "C": "連続データは計量値データとほぼ同義です。", "D": "分類データは、性別や血液型のようにカテゴリに分けるデータで、質的データの一種です。" } },
            { "id": 16, "question": "データの種類で、長さ、重さ、時間、温度のように連続的に測られるものを何と呼びますか？", "options": { "A": "計数値データ", "B": "計量値データ", "C": "分類データ", "D": "質的データ" }, "answer": "B", "explanations": { "A": "計数値データは、不良品の数など、数えて得られるデータです。", "B": "計量値データは、長さ、重さ、時間、温度のように、測定器を使って連続的な量を測って得られるデータです。", "C": "分類データはカテゴリに分けるデータです。", "D": "質的データは、数値で表されない言語データなどの総称です。" } },
            { "id": 17, "question": "ある対象全体の集まりを何と呼びますか？", "options": { "A": "サンプル", "B": "母集団", "C": "グループ", "D": "ロット" }, "answer": "B", "explanations": { "A": "サンプルは、母集団から抜き出された一部分のことです。", "B": "母集団は、調査や分析の対象となるすべての要素（データ）の集まりです。", "C": "グループは集まりを意味しますが、統計学では「母集団」という用語が使われます。", "D": "ロットは、同じ条件で生産された製品の集まりを指す言葉です。" } },
            { "id": 18, "question": "母集団の性質を知るために、その一部を抜き出したものを何と呼びますか？", "options": { "A": "全数検査", "B": "ロット", "C": "サンプル", "D": "プロセス" }, "answer": "C", "explanations": { "A": "全数検査は、母集団のすべてを調査することです。", "B": "ロットは生産された製品の集まりです。", "C": "サンプル（標本）は、母集団の性質を推測するために、母集団から抜き出された一部分のことです。", "D": "プロセスは仕事の一連の流れです。" } },
            { "id": 19, "question": "データを採取する目的として最も適切なものはどれですか？", "options": { "A": "データそのものの性質を知るため", "B": "データを採取した場面の状況を知るため", "C": "データを採取する人に責任をもたせるため", "D": "母集団の性質を知って処置（アクション）をとるため" }, "answer": "D", "explanations": { "A": "データそのものの性質を知ることは目的の一部ですが、最終目標ではありません。", "B": "状況を知ることも重要ですが、それも最終的なアクションのためです。", "C": "責任の所在を明確にすることは目的ではありません。", "D": "データを採取する最終的な目的は、データから母集団全体の性質を推測し、現状維持や改善といった適切な処置（アクション）をとることです。" } },
            { "id": 20, "question": "データの中心を示す尺度としてよく用いられるものは何ですか？", "options": { "A": "範囲", "B": "平均（Mean）", "C": "ばらつき", "D": "標準偏差" }, "answer": "B", "explanations": { "A": "範囲はデータのばらつきを示す尺度です。", "B": "平均値は、データをすべて足してその個数で割った値で、データの中心的な傾向を示す代表的な尺度です。他に中央値（メディアン）なども使われます。", "C": "ばらつきはデータの散らばり具合のことで、尺度そのものではありません。", "D": "標準偏差はデータのばらつきを示す代表的な尺度です。" } },
            { "id": 21, "question": "データの散らばり具合を示す尺度で、最大値から最小値を引いた値を何と呼びますか？", "options": { "A": "平均", "B": "中央値", "C": "範囲（Range）", "D": "標準偏差" }, "answer": "C", "explanations": { "A": "平均はデータの中心を示す尺度です。", "B": "中央値はデータを順に並べた時の中央の値で、中心を示す尺度です。", "C": "範囲（レンジ）は、データの最大値と最小値の差で、ばらつきの大きさを最も簡単に知ることができる尺度です。", "D": "標準偏差は、平均値からのばらつきの度合いを示す、より代表的な尺度です。" } },
            { "id": 22, "question": "データは必ずばらつくので、母集団の傾向を把握するためには何と何の側面から検討することが重要ですか？", "options": { "A": "経験と直感", "B": "平均的（中心）傾向とばらつき傾向", "C": "データの数値そのものだけ", "D": "質と量" }, "answer": "B", "explanations": { "A": "経験と直感は主観的な判断につながるため、データでの検討が重要です。", "B": "データを見て母集団の傾向を把握するには、データがどのあたりに集中しているかという「中心傾向」と、どの程度散らばっているかという「ばらつき傾向」の両面から見ることが不可欠です。", "C": "個々の数値だけを見ていては全体の傾向はつかめません。", "D": "質と量はデータの側面ですが、「中心」と「ばらつき」が統計的な見方として重要です。" } },
            { "id": 23, "question": "計量値データに該当しないものはどれですか？", "options": { "A": "部品の寸法", "B": "毎月のクレーム件数", "C": "製品の重さ", "D": "作業時間" }, "answer": "B", "explanations": { "A": "部品の寸法は測定器で測る連続量なので計量値データです。", "B": "毎月のクレーム件数は、1件、2件と数えるデータなので「計数値データ」に該当します。", "C": "製品の重さは測定器で測る連続量なので計量値データです。", "D": "作業時間は測定器で測る連続量なので計量値データです。" } },
            { "id": 24, "question": "データの種類で、数値で表す計量値データや計数値データとは異なり、数値で表されないデータを何と呼びますか？", "options": { "A": "質的データ", "B": "言語データ", "C": "連続データ", "D": "カテゴリデータ" }, "answer": "B", "explanations": { "A": "質的データは、言語データやカテゴリデータを含む広い概念です。", "B": "言語データは、インタビューの回答やアンケートの自由記述など、言葉で表現されたデータのことです。質的データの一種です。", "C": "連続データは計量値データのことです。", "D": "カテゴリデータは、性別や血液型など、分類のためのデータで質的データの一種です。" } },
            { "id": 25, "question": "データの中心傾向を示す尺度の一つで、データを大きさの順に並べたとき、ちょうど真ん中に位置する値は何ですか？", "options": { "A": "平均", "B": "最頻値", "C": "中央値（メディアン）", "D": "範囲" }, "answer": "C", "explanations": { "A": "平均は、すべてのデータを足して個数で割った値です。", "B": "最頻値（モード）は、データの中で最も出現回数が多い値です。", "C": "中央値（メディアン）は、データを大きさの順に並べたときに、ちょうど中央に位置する値です。外れ値の影響を受けにくいという特徴があります。", "D": "範囲はデータのばらつきを示す尺度です。" } },
            { "id": 26, "question": "問題の原因を重要度が高い順に並べ、重点的に取り組むべき項目を特定するために用いられる図は何ですか？", "options": { "A": "特性要因図", "B": "ヒストグラム", "C": "パレート図", "D": "管理図" }, "answer": "C", "explanations": { "A": "特性要因図は、問題の潜在的な原因を洗い出すために使われます。", "B": "ヒストグラムは、データの分布の形やばらつきを見るために使われます。", "C": "パレート図は、データを項目別に分類し、大きい順に並べた棒グラフと累積曲線で表した図です。これにより、問題の大部分を占める重要な原因（重点項目）を特定できます。", "D": "管理図は、工程が安定しているかどうかを時系列で監視するために使われます。" } },
            { "id": 27, "question": "特定の問題の潜在的な原因を体系的に洗い出し、整理するために用いられ、「魚の骨」のように見える図は何ですか？", "options": { "A": "パレート図", "B": "ヒストグラム", "C": "特性要因図（フィッシュボーン図）", "D": "散布図" }, "answer": "C", "explanations": { "A": "パレート図は、重点項目を特定するために使われます。", "B": "ヒストグラムはデータの分布を見るために使われます。", "C": "特性要因図は、特定の結果（特性）に対して、その原因（要因）がどのように関係しているかを体系的に整理した図です。その形から「魚の骨」とも呼ばれます。", "D": "散布図は、2つの変数の関係を見るために使われます。" } },
            { "id": 28, "question": "データの分布の形やばらつきを視覚的に把握するための棒グラフは何ですか？", "options": { "A": "パレート図", "B": "散布図", "C": "ヒストグラム", "D": "折れ線グラフ" }, "answer": "C", "explanations": { "A": "パレート図は項目別に大きい順に並べた棒グラフですが、分布の形を見るのが主目的ではありません。", "B": "散布図は2つの変数の関係を見るための点グラフです。", "C": "ヒストグラムは、計量値データをいくつかの区間に分け、各区間に入るデータの数を棒グラフで表したものです。これにより、データの分布の形、中心、ばらつきを視覚的に把握できます。", "D": "折れ線グラフは、主に時系列データの推移を見るために使われます。" } },
            { "id": 29, "question": "データの変化や傾向を分かりやすく示すための図で、時系列の変化を見る際などに使用されるものは何ですか？", "options": { "A": "ヒストグラム", "B": "パレート図", "C": "グラフ（折れ線グラフ、円グラフなど）", "D": "チェックシート" }, "answer": "C", "explanations": { "A": "ヒストグラムはデータの分布を見ます。", "B": "パレート図は重点項目を見ます。", "C": "グラフは、データを視覚的に表現するものの総称です。特に折れ線グラフは、売上の推移など、時系列データの変化や傾向を見るのに適しています。", "D": "チェックシートはデータを収集するための表です。" } },
            { "id": 30, "question": "工程が安定した状態にあるかを時系列で監視し、異常を検出するために用いられる図は何ですか？", "options": { "A": "ヒストグラム", "B": "パレート図", "C": "管理図", "D": "散布図" }, "answer": "C", "explanations": { "A": "ヒストグラムはデータの分布を見ます。", "B": "パレート図は重点項目を見ます。", "C": "管理図は、時系列に並べたデータと、管理限界線（UCL, LCL）から構成されるグラフです。工程が安定した状態（管理状態）にあるか、異常なばらつきが発生していないかを監視するために用います。", "D": "散布図は2つの変数の関係を見ます。" } },
            { "id": 31, "question": "データ収集を効率的に行うための記録用紙は何ですか？", "options": { "A": "グラフ用紙", "B": "チェックシート", "C": "管理図", "D": "メモ用紙" }, "answer": "B", "explanations": { "A": "グラフ用紙はグラフを描くためのものです。", "B": "チェックシートは、データを収集する目的や項目をあらかじめ表の形に整理し、チェックマークを入れるだけで簡単にデータを収集・記録できるように工夫された用紙です。", "C": "管理図はデータを分析・監視するためのグラフです。", "D": "メモ用紙では、体系的なデータ収集は困難です。" } },
            { "id": 32, "question": "2つの変数の間に相関関係があるかを視覚的に確認するために用いられる図は何ですか？", "options": { "A": "ヒストグラム", "B": "特性要因図", "C": "散布図", "D": "パレート図" }, "answer": "C", "explanations": { "A": "ヒストグラムは1つの変数の分布を見ます。", "B": "特性要因図は原因と結果の関係を整理します。", "C": "散布図は、対になった2つの変数（例: 気温とアイスの売上）を点でプロットしたグラフです。点の分布パターンから、2つの変数の間に相関関係があるかどうかを視覚的に確認できます。", "D": "パレート図は重点項目を見つけます。" } },
            { "id": 33, "question": "データをいくつかの均質なグループに分けて分析することで、全体では見えなかった特徴や原因を明らかにする手法は何ですか？", "options": { "A": "全数調査", "B": "サンプリング", "C": "層別", "D": "無作為抽出" }, "answer": "C", "explanations": { "A": "全数調査は、対象のすべてを調査することです。", "B": "サンプリングは、一部を抜き出すことです。", "C": "層別は、データを機械別、担当者別、材料別などのように、共通点を持ついくつかのグループ（層）に分けて分析する手法です。これにより、グループごとの違いが明確になり、問題の原因究明に役立ちます。", "D": "無作為抽出はサンプリングの一つの方法です。" } },
            { "id": 34, "question": "QC七つ道具の活用において、もっとも不適切な説明はどれですか？", "options": { "A": "QC七つ道具は、問題解決や改善活動を進めるための基本的なツールである。", "B": "データを視覚的に示し、分かりやすく理解するために活用する。", "C": "QC七つ道具は、あくまでツールであり、それ自体が問題解決の最終的な答えである 。", "D": "問題解決の次の行動につなげるために、これらのツールを活用する。" }, "answer": "C", "explanations": { "A": "その通り、QC七つ道具は品質管理の基本的なツールです。", "B": "その通り、データをグラフや図で可視化することが主な目的です。", "C": "QC七つ道具は、あくまで事実を客観的に把握するための「ツール（道具）」です。それを使って何が問題かを発見し、対策を考えるのは人間です。ツール自体が答えをくれるわけではありません。", "D": "その通り、分析結果から次のアクションを導き出すために活用します。" } },
            { "id": 35, "question": "提供されたソースの図1に示されているQC七つ道具の名称は何ですか？（図1はmd_4875.pdfの56ページにあるパレート図を指す）", "options": { "A": "ヒストグラム", "B": "管理図", "C": "特性要因図", "D": "パレート図" }, "answer": "D", "explanations": { "A": "ヒストグラムはデータの分布を見る棒グラフです。", "B": "管理図は中心線と管理限界線を持つ折れ線グラフです。", "C": "特性要因図は魚の骨のような形をしています。", "D": "図1は、項目別に棒グラフが大きい順に並び、累積の折れ線グラフが描かれているため、パレート図です。" } },
            { "id": 36, "question": "図1のQC七つ道具（パレート図）の説明として最も適切なものはどれですか？", "options": { "A": "連続した観測値や統計量の値を時系列に打点し、管理限界線を持つもの", "B": "項目別に層別し、出現頻度の大きさの順に並べるとともに、累積和を示したもの", "C": "データの分布の形やばらつきを視覚的に把握するための棒グラフ", "D": "データの変化や傾向を分かりやすく示すための図" }, "answer": "B", "explanations": { "A": "これは管理図の説明です。", "B": "パレート図は、項目別に層別し、出現頻度（不良件数など）の大きさの順に並べた棒グラフと、その累積比率を示す折れ線グラフを組み合わせた図です。", "C": "これはヒストグラムの説明です。", "D": "これはグラフ全般、特に折れ線グラフなどの説明です。" } },
            { "id": 37, "question": "図1のQC七つ道具（パレート図）の用途として最も適切なものはどれですか？", "options": { "A": "工程が安定した状態にあるかを監視し、異常を検出する", "B": "特定の問題の潜在的な原因を体系的に洗い出し、整理する", "C": "問題解決に取り組む対象を選ぶときなどに、何が重要か、それが全体のどれくらいを占めているかを知るために用いる", "D": "2つの変数の間に相関関係があるかを視覚的に確認する" }, "answer": "C", "explanations": { "A": "これは管理図の用途です。", "B": "これは特性要因図の用途です。", "C": "パレート図は、多くの問題項目の中から、全体に大きな影響を与えている少数の重要な項目（重点項目）を見つけ出すために使われます。「重点指向」の考え方を実践するツールです。", "D": "これは散布図の用途です。" } },
            { "id": 38, "question": "組織内の情報共有と円滑なコミュニケーションの基本とされる活動は何ですか？", "options": { "A": "5W1H", "B": "PDCAサイクル", "C": "報告・連絡・相談（ほうれんそう）", "D": "5ゲン主義" }, "answer": "C", "explanations": { "A": "5W1Hは情報を明確に伝えるためのフレームワークです。", "B": "PDCAサイクルは改善活動のフレームワークです。", "C": "報告・連絡・相談（ほうれんそう）は、組織で仕事を進める上で、円滑な情報共有と意思決定を行うための基本的なコミュニケーション活動です。", "D": "5ゲン主義は問題解決の心構えです。" } },
            { "id": 39, "question": "報告のポイントとして、最も不適切なものはどれですか？", "options": { "A": "報告は事実に基づいて行う。", "B": "決められた納期や連絡事項を守って行う。", "C": "都合の悪い報告は後回しにする 。", "D": "報告は、わかりやすく要点を簡潔に伝える。" }, "answer": "C", "explanations": { "A": "報告は、推測や意見と事実を区別し、事実に基づいて行うことが基本です。", "B": "報告はタイミングが重要です。決められた期限を守る必要があります。", "C": "都合の悪い情報（悪いニュース）ほど、早く報告することが重要です。報告が遅れると問題が拡大し、手遅れになる可能性があります。", "D": "報告は相手に正しく伝わることが重要なので、要点を簡潔に分かりやすく伝えるべきです。" } },
            { "id": 40, "question": "問題解決や計画立案の際に、情報を明確にするためのフレームワークは何ですか？", "options": { "A": "PDCA", "B": "SDCA", "C": "5W1H", "D": "ほうれんそう" }, "answer": "C", "explanations": { "A": "PDCAは改善活動のフレームワークです。", "B": "SDCAは維持活動のフレームワークです。", "C": "5W1Hは、When（いつ）、Where（どこで）、Who（誰が）、What（何を）、Why（なぜ）、How（どのように）の6つの要素で情報を整理し、抜け漏れなく明確にするためのフレームワークです。", "D": "ほうれんそうはコミュニケーションの基本です。" } },
            { "id": 41, "question": "問題解決のために「現場（実際の場所）、現物（実際の物）、現実（実際の状況）」を自ら確認することの重要性を示す考え方は何ですか？", "options": { "A": "5ゲン主義", "B": "三現主義", "C": "5W1H", "D": "重点指向" }, "answer": "B", "explanations": { "A": "5ゲン主義は三現主義に原理・原則を加えたものです。", "B": "三現主義は、問題が発生したとき、机上の空論ではなく、実際に「現場」へ行き、「現物」に触れ、「現実」をよく観察して、事実に基づいて判断することの重要性を説く考え方です。", "C": "5W1Hは情報を整理するフレームワークです。", "D": "重点指向は優先順位付けの考え方です。" } },
            { "id": 42, "question": "「三現主義」の説明として正しいものはどれですか？", "options": { "A": "問題解決の基本を成す言葉で、事実を見極めるために現場に3回以上通うことが大切との考え方", "B": "現場で問題解決を行う時の品質管理手法を、考え方・展開の仕方・具体的事例を3冊の小冊子で解説してあるためこの名前がついている", "C": "一般的には、「現場・現物・現実」の3つの現をとって3現という。この3つを大切にして事実をよく見て仕事をするという態度", "D": "一人で3つ以上の現場について品質を担当できる力量を持つと、品質管理をマスターしたことになるという考え方" }, "answer": "C", "explanations": { "A": "回数は関係ありません。", "B": "小冊子の数とは関係ありません。", "C": "三現主義は、「現場・現物・現実」の3つの「現」を重視し、事実を正しく把握して仕事に取り組む姿勢や考え方のことです。", "D": "担当する現場の数とは関係ありません。" } },
            { "id": 43, "question": "三現主義に「原理」と「原則」を加えた考え方を何と呼びますか？", "options": { "A": "PDCAサイクル", "B": "5ゲン主義", "C": "重点指向", "D": "標準化" }, "answer": "B", "explanations": { "A": "PDCAサイクルは改善のフレームワークです。", "B": "5ゲン主義は、三現主義（現場・現物・現実）に、科学的な法則である「原理」と、守るべきルールである「原則」の2つの「ゲン」を加えて、より深く問題解決を行うための考え方です。", "C": "重点指向は優先順位付けの考え方です。", "D": "標準化は業務のやり方を定める活動です。" } },
            { "id": 44, "question": "社会人としての基本的な態度や行動であり、顧客満足にもつながる重要な要素は何ですか？", "options": { "A": "スキル", "B": "知識", "C": "マナー", "D": "経験" }, "answer": "C", "explanations": { "A": "スキルは特定の業務を遂行する能力です。", "B": "知識は業務に必要な情報です。", "C": "マナーは、周囲の人と良好な関係を築き、円滑に仕事を進めるための基本的な態度や行動規範です。良いマナーは顧客満足にも直結します。", "D": "経験は過去の業務から得られるものです。" } },
            { "id": 45, "question": "勤務時間中に私的な用件で携帯電話を使用したり、会社の備品を個人的な理由のために使用しないことを意味するマナーの項目は何ですか？", "options": { "A": "身だしなみ", "B": "整理・整頓", "C": "清掃", "D": "公私混同" }, "answer": "D", "explanations": { "A": "身だしなみは、服装や髪形など外見を整えることです。", "B": "整理・整頓は、職場を使いやすく片付けることです。", "C": "清掃は、職場をきれいに掃除することです。", "D": "公私混同をしない、とは、会社の立場（公）と個人の立場（私）を明確に区別し、会社の資源を私的に利用しないという、社会人としての基本的なマナーです。" } },
            { "id": 46, "question": "上司や先輩に敬語で接することや、年下の人に対しても呼び捨てにしないなどの心がけが必要なマナーの項目は何ですか？", "options": { "A": "健康管理", "B": "挨拶", "C": "時間の厳守", "D": "言葉遣い" }, "answer": "D", "explanations": { "A": "健康管理は、自身の体調を整えることです。", "B": "挨拶は、コミュニケーションの基本となる行為です。", "C": "時間の厳守は、約束の時間を守ることです。", "D": "言葉遣いは、相手や場面に応じた適切な言葉を選ぶことで、円滑な人間関係を築くための重要なマナーです。" } },
            { "id": 47, "question": "会議開始時間には、既に出席しているようにしておくなどの意識をもって行動すること、を意味するマナーの項目は何ですか？", "options": { "A": "言葉遣い", "B": "挨拶", "C": "身だしなみ", "D": "時間の厳守" }, "answer": "D", "explanations": { "A": "言葉遣いは、適切な言葉を選ぶことです。", "B": "挨拶はコミュニケーションの基本です。", "C": "身だしなみは外見を整えることです。", "D": "時間の厳守は、単に遅刻しないだけでなく、約束の時間には準備が整っている状態にすることを意味します。周囲への配慮を示す重要なマナーです。" } },
            { "id": 48, "question": "出社時や退社時、会議で集合したときなど、相手の目を見てしっかり行うことが大切なマナーの項目は何ですか？", "options": { "A": "公私混同", "B": "言葉遣い", "C": "時間の厳守", "D": "挨拶" }, "answer": "D", "explanations": { "A": "公私混同は、公私の区別をつけることです。", "B": "言葉遣いは、適切な言葉を選ぶことです。", "C": "時間の厳守は、約束の時間を守ることです。", "D": "挨拶は、相手の存在を認め、良好な人間関係を築くための第一歩です。明るくはっきりと行うことが、良い職場環境を作る上で重要です。" } },
            { "id": 49, "question": "お金をもらって働くプロとして責任をもって仕事を行い、組織の一員であることを常に意識し、自分勝手な行動はとらないことを意味するマナーの項目は何ですか？", "options": { "A": "健康管理", "B": "社会人としての自覚", "C": "挨拶", "D": "整理・整頓" }, "answer": "B", "explanations": { "A": "健康管理もプロ意識の一部ですが、より広い概念を指します。", "B": "社会人としての自覚とは、学生気分を捨て、組織の一員として給料をもらうプロフェッショナルであるという意識を持つことです。責任感のある行動の基礎となります。", "C": "挨拶は重要なマナーの一つです。", "D": "整理・整頓も重要なマナーの一つです。" } },
            { "id": 50, "question": "検太くんと業務課長の会話で、検太くんの「まあまあです。」という答え方はマナーとして適切ですか？", "options": { "A": "適切である", "B": "不適切である" }, "answer": "B", "explanations": { "A": "「まあまあ」という表現は曖昧で、相手に不安や不信感を与える可能性があるため不適切です。", "B": "上司への報告として「まあまあです」という表現は不適切です。進捗状況を尋ねられた場合は、「順調です」や「〇〇の点で少し課題がありますが、進めています」など、具体的で分かりやすい言葉で答えるべきです。" } },
            { "id": 51, "question": "検太くんが遅刻した場合の上司の注意に対し、今後最も適切に対応すべき行動は何ですか？", "options": { "A": "電車やバスが遅れるのは仕方が無いので、上司にそれを理解させる", "B": "電車やバスの遅れにより遅刻することもあるので、タイムレコーダーがあるので、特に対処はしない", "C": "電車やバスが遅れるのは仕方が無いので、電話連絡などを入れるようにする", "D": "電車やバスが多少遅れても、遅刻にならないように余裕をもって出勤するようにし、万一遅れた場合は電話連絡などをする" }, "answer": "D", "explanations": { "A": "他責にする態度は不適切です。", "B": "何の対処もしないのは社会人として無責任です。", "C": "連絡は必要ですが、遅刻を前提とするのは問題です。", "D": "交通機関の遅延はある程度予測できるリスクです。それを考慮して余裕をもって家を出ることが、時間を厳守するというマナーの基本です。万が一、それでも遅れる場合は速やかに連絡を入れるのが適切な対応です。" } },
            { "id": 52, "question": "職場で行われる、作業中に潜む危険を事前に予測し、対策を立てる活動を何と呼びますか？", "options": { "A": "5S活動", "B": "危険予知活動（KYK）", "C": "品質改善活動", "D": "標準化活動" }, "answer": "B", "explanations": { "A": "5S活動は、整理・整頓・清掃・清潔・躾により、安全で効率的な職場環境を作る活動です。", "B": "危険予知活動（KYK）は、作業前にその作業に潜む危険を洗い出し、対策を立ててから作業に取り掛かることで、労働災害を未然に防ぐ活動です。", "C": "品質改善活動は、製品やサービスの品質を向上させる活動です。", "D": "標準化活動は、業務のやり方を標準に定める活動です。" } },
            { "id": 53, "question": "1件の重大な災害の背後には多数の軽微な事故やヒヤリ・ハットがあるという法則は何ですか？", "options": { "A": "パレートの法則", "B": "ゴードンの法則", "C": "ハインリッヒの法則", "D": "ベルヌーイの法則" }, "answer": "C", "explanations": { "A": "パレートの法則は、結果の8割は2割の原因から生じるという法則です。", "B": "ゴードンの法則は、創造性開発技法に関するものです。", "C": "ハインリッヒの法則は、1件の重大事故の背景には、29件の軽微な事故と、300件のヒヤリ・ハット（事故には至らなかった危険な出来事）が存在するという労働災害に関する経験則です。", "D": "ベルヌーイの法則は、流体力学に関する法則です。" } },
            { "id": 54, "question": "品質管理の最終的な目的は、顧客の何を獲得することですか？", "options": { "A": "利益", "B": "信頼", "C": "顧客満足", "D": "評判" }, "answer": "C", "explanations": { "A": "利益は目的を達成した結果として得られるものです。", "B": "信頼も重要ですが、より包括的な目的を指します。", "C": "品質管理の最終的な目的は、顧客の要求を満たし、期待に応える製品・サービスを提供することで、「顧客満足（Customer Satisfaction）」を獲得し、企業の継続的な発展につなげることです。", "D": "評判は顧客満足の結果として形成されます。" } },
            { "id": 55, "question": "「製品やサービスが使用目的を満たしている程度」とは、品質のどの側面を指しますか？", "options": { "A": "魅力品質", "B": "当然品質", "C": "一元品質", "D": "ねらいの品質" }, "answer": "D", "explanations": { "A": "魅力品質は、顧客の期待を超えるような、なくても不満はないが、あると満足度が大きく向上する品質です。", "B": "当然品質は、備わっていて当たり前で、なければ不満となる品質です。", "C": "一元品質は、満たされるほど満足度が上がり、満たされないほど不満が大きくなる品質です。", "D": "「ねらいの品質」とは、製品やサービスを企画・設計する段階で、顧客の使用目的をどの程度満たすかを目標として定めた品質のことです。" } },
            { "id": 56, "question": "品質管理における「維持」活動の目的は何ですか？", "options": { "A": "新しい製品を開発する", "B": "決まった標準や規則に従って、良い製品やサービスを作り続けること", "C": "既存の業務プロセスを根本的に変える", "D": "顧客からのクレームに対応する" }, "answer": "B", "explanations": { "A": "新しい製品の開発は、新製品開発プロセスです。", "B": "「維持」活動とは、定められた標準（作業標準など）を守り、管理状態を保つことで、安定した品質の製品やサービスを継続的に作り続ける活動です。SDCAサイクルが用いられます。", "C": "プロセスを根本的に変えるのは「改善」活動です。", "D": "クレーム対応は品質保証活動の一部ですが、「維持」活動そのものではありません。" } },
            { "id": 57, "question": "品質管理における「改善」活動の目的は何ですか？", "options": { "A": "既存の製品やサービスの品質を維持する", "B": "現在の仕事のやり方をより良くしたり、間違いを減らしたり、能率を上げたりする活動", "C": "法律や規制を遵守する", "D": "顧客からのフィードバックを収集する" }, "answer": "B", "explanations": { "A": "品質を維持するのは「維持」活動です。", "B": "「改善」活動とは、現在の仕事のやり方やプロセスの問題点を見つけ、それをより良い状態に変えていく活動です。品質の向上、コストの削減、生産性の向上などを目指します。PDCAサイクルが用いられます。", "C": "法規制の遵守は企業活動の前提です。", "D": "フィードバック収集は改善活動のインプットとなります。" } },
            { "id": 58, "question": "PDCAサイクルにおける「C（Check）」の段階で実施すべきことは何ですか？", "options": { "A": "目標を設定し、計画を立てる", "B": "計画に基づいて作業を実行する", "C": "実行した結果が良かったかどうか、計画と実績のギャップ、問題や原因を確認する", "D": "問題や原因に対して対策を立て、次の計画につなげる" }, "answer": "C", "explanations": { "A": "これはP（Plan）の段階です。", "B": "これはD（Do）の段階です。", "C": "C（Check）の段階では、実行（Do）した結果が、計画（Plan）通りに進んだか、目標を達成できたかを評価・確認します。計画と実績の差（ギャップ）を分析し、問題点を明らかにします。", "D": "これはA（Act）の段階です。" } },
            { "id": 59, "question": "PDCAサイクルにおける「A（Act）」の段階で実施すべきことは何ですか？", "options": { "A": "目標を設定し、計画を立てる", "B": "計画に基づいて作業を実行する", "C": "実行した結果が良かったかどうかを確認する", "D": "計画と実績の差異が生じた場合、その原因やプロセスの問題に対し対策を立て、次の計画や標準化につなげる" }, "answer": "D", "explanations": { "A": "これはP（Plan）の段階です。", "B": "これはD（Do）の段階です。", "C": "これはC（Check）の段階です。", "D": "A（Act）の段階では、確認（Check）の結果判明した課題に対して、適切な処置を行います。うまくいったことは標準化して定着させ（SDCAへ）、問題があった点は改善策を講じて次の計画（Plan）に反映させます。" } },
            { "id": 60, "question": "QCストーリーの一般的なステップで、問題点の「改善策の検討」の前に行われるべきステップは何ですか？", "options": { "A": "効果の確認", "B": "現状把握と目標設定", "C": "処置の定着", "D": "テーマ選定" }, "answer": "B", "explanations": { "A": "効果の確認は、改善策を実施した後に行います。", "B": "QCストーリーでは、テーマを選定した後、まず「現状把握と目標設定」で問題の大きさをデータで把握し、具体的な目標を立てます。その上で原因を分析し、「改善策の検討」に進みます。", "C": "処置の定着は、効果が確認できた策を標準化する最終段階です。", "D": "テーマ選定は、最初に行うステップです。" } },
            { "id": 61, "question": "職場で行われる、自発的な品質改善活動を何と呼びますか？", "options": { "A": "品質保証活動", "B": "品質監査", "C": "小集団改善活動（QCサークル活動）", "D": "全員参加活動" }, "answer": "C", "explanations": { "A": "品質保証活動は、顧客に信頼される製品を提供するための体系的な活動全般を指します。", "B": "品質監査は、品質活動が計画通りに実施されているかを確認する活動です。", "C": "小集団改善活動（QCサークル活動）は、同じ職場の従業員が自発的に小グループを作り、QC手法を用いて品質の改善や問題解決に取り組む活動です。", "D": "全員参加活動は品質管理の基本姿勢であり、QCサークル活動もその一つです。" } },
            { "id": 62, "question": "標準化の目的で最も適切なものはどれですか？", "options": { "A": "個人の裁量で仕事を進めること", "B": "業務のやり方を定めて維持し、品質と効率の安定化を図ること", "C": "常に新しい方法を試すこと", "D": "検査の頻度を減らすこと" }, "answer": "B", "explanations": { "A": "標準化は、個人の裁量によるばらつきをなくすことを目指します。", "B": "標準化の目的は、最も良い業務のやり方を標準として定め、それを全員が守ることで、業務のばらつきをなくし、品質と効率を安定させることです。", "C": "常に新しい方法を試すのは「改善」活動であり、標準化とは異なります。", "D": "検査の頻度は、工程の安定性などに基づいて決定され、標準化の直接の目的ではありません。" } },
            { "id": 63, "question": "日本産業規格（JIS）を制定しているのはどの組織ですか？", "options": { "A": "ISO", "B": "IEC", "C": "JIS", "D": "日本規格協会" }, "answer": "C", "explanations": { "A": "ISOは国際標準化機構です。", "B": "IECは国際電気標準会議です。", "C": "JIS（Japanese Industrial Standards）は、日本の産業製品に関する規格や測定法などが定められた国家規格です。産業標準化法に基づき、主務大臣が制定します。", "D": "日本規格協会（JSA）は、JISの原案作成や出版・普及などを行う一般財団法人です。" } },
            { "id": 64, "question": "国際標準化機構の略称は何ですか？", "options": { "A": "IEC", "B": "JIS", "C": "ISO", "D": "JSA" }, "answer": "C", "explanations": { "A": "IECは国際電気標準会議（International Electrotechnical Commission）の略称です。", "B": "JISは日本産業規格（Japanese Industrial Standards）の略称です。", "C": "ISOは国際標準化機構（International Organization for Standardization）の略称です。電気・電子分野を除くあらゆる産業分野の国際規格を策定しています。", "D": "JSAは日本規格協会（Japanese Standards Association）の略称です。" } },
            { "id": 65, "question": "検査の種類で、原材料や一部加工品を受け入れる際に行われる検査は何ですか？", "options": { "A": "中間検査", "B": "最終検査", "C": "出荷検査", "D": "受入検査" }, "answer": "D", "explanations": { "A": "中間検査は、製造工程の途中段階で行われる検査です。", "B": "最終検査は、製品が完成した後に行われる検査です。", "C": "出荷検査は、製品を顧客に出荷する前に行われる検査です。", "D": "受入検査は、外部の納入業者から購入した原材料や部品を受け入れる際に、その品質を確認するために行う検査です。" } },
            { "id": 66, "question": "プロセスのインプットからアウトプットに至る一連の活動で、付加価値を生み出す活動を何と呼びますか？", "options": { "A": "検査", "B": "維持活動", "C": "工程", "D": "改善活動" }, "answer": "C", "explanations": { "A": "検査は付加価値を生まない活動とされています。", "B": "維持活動は品質を安定させる活動です。", "C": "工程は、インプットをアウトプットに変換する一連の活動であり、この中で付加価値が生み出されます。プロセスとほぼ同義で使われます。", "D": "改善活動は工程をより良くする活動です。" } },
            { "id": 67, "question": "統計的な判断において、対象となる全体の集まりの一部を抜き出す手法を何と呼びますか？", "options": { "A": "全数調査", "B": "サンプリング", "C": "層別", "D": "全体調査" }, "answer": "B", "explanations": { "A": "全数調査は、対象のすべてを調査することです。", "B": "サンプリング（標本調査）は、母集団の性質を推測するために、その一部であるサンプルを抜き出して調査する手法です。", "C": "層別はデータをグループ分けする手法です。", "D": "全体調査は全数調査と同義です。" } },
            { "id": 68, "question": "データを収集する際に、偏りなく母集団からランダムにサンプルを抽出する方法を何と呼びますか？", "options": { "A": "層別サンプリング", "B": "系統サンプリング", "C": "無作為サンプリング（ランダムサンプリング）", "D": "集中サンプリング" }, "answer": "C", "explanations": { "A": "層別サンプリングは、母集団を層に分けてから各層で無作為抽出する方法です。", "B": "系統サンプリングは、通し番号を付けて一定間隔で抽出する方法です。", "C": "無作為サンプリング（ランダムサンプリング）は、母集団のどの要素も同じ確率で選ばれるように、偏りなくサンプルを抽出する方法です。統計的な推測の基本となります。", "D": "集中サンプリングという用語は一般的ではありません。" } },
            { "id": 69, "question": "QC七つ道具は、品質管理でデータを取り扱う際に、どのような目的で活用されますか？", "options": { "A": "個人の勘や経験に頼るため", "B": "データを収集、整理、分析し、問題解決や改善に役立てるため", "C": "意思決定を迅速化するため", "D": "報告書を簡単にするため" }, "answer": "B", "explanations": { "A": "QC七つ道具は、勘や経験といった主観ではなく、客観的なデータに基づいて判断するために使います。", "B": "QC七つ道具は、数値データを図やグラフに整理・分析することで、問題を可視化し、解決や改善に役立てるための基本的なツール群です。", "C": "迅速化に繋がることもありますが、それが主目的ではありません。", "D": "報告書作成に役立ちますが、それが主目的ではありません。" } },
            { "id": 70, "question": "パレート図において、重要度の高い項目が全体の約80%を占める場合、これは何という考え方に基づいていますか？", "options": { "A": "ハインリッヒの法則", "B": "パレートの法則", "C": "5ゲン主義", "D": "PDCAサイクル" }, "answer": "B", "explanations": { "A": "ハインリッヒの法則は、1件の重大な災害の背後には多数の軽微な事故やヒヤリ・ハットがあるという労働災害における経験則です。", "B": "パレートの法則は、結果の80%は全体の20%の要素によって生み出されているという考え方で、品質管理では「重点指向」として、影響の大きい少数の問題に集中するためにパレート図で活用されます。", "C": "5ゲン主義は、三現主義（現場・現物・現実）に「原理」と「原則」を加えた、問題解決のための考え方です。", "D": "PDCAサイクルは、計画→実行→確認→処置の4段階を繰り返すことで、継続的な業務改善を行うためのフレームワークです。" } },
            { "id": 71, "question": "特性要因図において、原因を分類する際に用いられる主要な4つのMは何ですか？", "options": { "A": "Money, Market, Method, Measurement", "B": "Man, Machine, Material, Method", "C": "Management, Maintenance, Motivation, Manpower", "D": "Measure, Move, Monitor, Make" }, "answer": "B", "explanations": { "A": "MoneyやMarketは直接的な製造プロセスの要因ではありません。", "B": "特性要因図では、原因を大きな骨として分類します。製造業では、人（Man）、機械（Machine）、材料（Material）、方法（Method）の4Mで分類するのが一般的です。", "C": "これらは4Mからさらに派生した要因として考えることができます。", "D": "これらは4Mの一般的な定義ではありません。" } },
            { "id": 72, "question": "ヒストグラムで、データの分布が左右対称で中央に最も多く、中央から離れるに従って少なくなる形を何と呼びますか？", "options": { "A": "二山形", "B": "離れ小島形", "C": "一般形", "D": "絶壁形" }, "answer": "C", "explanations": { "A": "二山形は、山が2つある分布で、異なる2つのグループのデータが混在している可能性があります。", "B": "離れ小島形は、本体から離れた場所に小さな分布があり、異常値や異なるデータが混じっている可能性があります。", "C": "一般形は、正規分布に似た、中央が最も高く左右対称な釣鐘状の分布です。工程が安定している場合によく見られます。", "D": "絶壁形は、片側が規格値などで打ち切られている場合に現れる分布です。" } },
            { "id": 73, "question": "管理図が示す「工程は異常である」と判断される状態は何ですか？", "options": { "A": "管理限界線内にある", "B": "中心線付近に打点が多い", "C": "打点が管理限界線を越えて外れた場合や、特定のリズムで変動している場合", "D": "ばらつきが小さい" }, "answer": "C", "explanations": { "A": "点が管理限界線内にあるのは、工程が安定している（管理状態にある）と判断される基本的な条件です。", "B": "中心線付近に点が多いのは、むしろ安定している状態を示します。", "C": "工程が異常であると判断する基準には、①点が管理限界線を越える、②点が連続して上昇・下降する（連）、③点が中心線から片側に偏る、などがあります。これらは偶然では起こりにくいパターンです。", "D": "ばらつきが小さいのは望ましい状態です。" } },
            { "id": 74, "question": "チェックシートを使用する最大のメリットは何ですか？", "options": { "A": "データ分析が自動的に行われる", "B": "効率的かつ正確なデータ収集ができること", "C": "グラフが自動的に作成される", "D": "問題の原因が自動的に特定される" }, "answer": "B", "explanations": { "A": "チェックシートは収集ツールであり、分析は別途行います。", "B": "チェックシートの最大のメリットは、あらかじめ決められた項目にチェックを入れるだけで、誰でも簡単に、効率よく、そして間違いなくデータを収集できることです。", "C": "チェックシートのデータをもとにグラフを作成しますが、自動作成されるわけではありません。", "D": "チェックシートのデータから原因を推測しますが、原因が自動的に特定されるわけではありません。" } },
            { "id": 75, "question": "散布図で2つの変数の間に、一方が増加するともう一方も増加する関係がある場合、どのような相関があると言えますか？", "options": { "A": "負の相関", "B": "相関なし", "C": "正の相関", "D": "無相関" }, "answer": "C", "explanations": { "A": "負の相関は、一方が増加するともう一方が減少する関係で、分布は右下がりになります。", "B": "相関なし（無相関）は、2つの変数に明確な関係が見られない状態で、点が全体にばらつきます。", "C": "正の相関は、一方が増加するともう一方も増加する関係で、分布は右上がりになります。", "D": "無相関は相関なしと同じ意味です。" } },
            { "id": 76, "question": "報告・連絡・相談（ほうれんそう）において、連絡のポイントとして最も適切なものはどれですか？", "options": { "A": "事実だけでなく推測も伝える", "B": "重要な情報は、口頭で伝えるだけにする", "C": "重要な関係者には必ず伝えるべき情報を、速やかに正確に伝える", "D": "業務が忙しい場合は、連絡を省略してもよい" }, "answer": "C", "explanations": { "A": "推測を伝える場合は、事実と明確に区別する必要があります。", "B": "重要な情報は、記録に残すためにも文書などと併用することが望ましいです。", "C": "連絡は、関係者に必要な情報を、タイミングを逃さず、正確に伝えることが最も重要です。情報共有の基本です。", "D": "自己判断で連絡を省略すると、後で大きな問題に発展する可能性があります。" } },
            { "id": 77, "question": "報告・連絡・相談（ほうれんそう）において、相談のポイントとして最も適切なものはどれですか？", "options": { "A": "自分で解決できない問題はすぐに上司に丸投げする", "B": "相談は自分の意見を述べず、ただ質問するだけにする", "C": "自分で考えた上で、解決策や進め方をいくつか提案し、上司や先輩の意見を聞く", "D": "相談は、自分の責任を回避するために行う" }, "answer": "C", "explanations": { "A": "丸投げは、自身の成長機会を失うだけでなく、上司の時間を奪うことになります。", "B": "ただ質問するだけでは、指示待ち人間と見なされてしまいます。", "C": "相談する際は、まず自分で状況を整理し、どうしたいのか、自分なりの考えや解決策の案を持った上で臨むことが重要です。これにより、的確なアドバイスが得られ、自身の成長にもつながります。", "D": "責任回避のための相談は、信頼を損なう行為です。" } },
            { "id": 78, "question": "5W1Hの「H」は何を意味しますか？", "options": { "A": "When (いつ)", "B": "Who (だれが)", "C": "What (何を)", "D": "How (どのように)" }, "answer": "D", "explanations": { "A": "Whenは「いつ」です。", "B": "Whoは「誰が」です。", "C": "Whatは「何を」です。", "D": "5W1HのHは「How」で、「どのように」手段や方法を意味します。How much（いくらで）やHow many（いくつ）なども含まれます。" } },
            { "id": 79, "question": "三現主義における「現実」とは何を指しますか？", "options": { "A": "実際の場所", "B": "実際の物", "C": "実際の状況（問題の進捗状況など）", "D": "実際の記録" }, "answer": "C", "explanations": { "A": "実際の場所は「現場」です。", "B": "実際の物は「現物」です。", "C": "三現主義における「現実」とは、その場で何が起こっているのか、どのような状況になっているのかという、事実や実際の状態を指します。", "D": "記録は現実を把握するための一つの手段です。" } },
            { "id": 80, "question": "5ゲン主義において、三現主義に加えて重視される2つの「ゲン」は何ですか？", "options": { "A": "原点、源流", "B": "原理、原則", "C": "現像、現象", "D": "原稿、原本" }, "answer": "B", "explanations": { "A": "これらは5ゲン主義の要素ではありません。", "B": "5ゲン主義は、三現主義（現場・現物・現実）に、物事の基本的な法則である「原理」と、守るべきルールである「原則」を加えたものです。", "C": "これらは5ゲン主義の要素ではありません。", "D": "これらは5ゲン主義の要素ではありません。" } },
            { "id": 81, "question": "職場マナーで「時間を厳守する」ことの重要性として最も適切なものはどれですか？", "options": { "A": "自分の仕事が早く終わるため", "B": "上司に良い印象を与えるため", "C": "他のメンバーや組織全体の業務に影響を与えないため", "D": "残業を減らすため" }, "answer": "C", "explanations": { "A": "それは副次的な結果かもしれません。", "B": "良い印象を与えることもありますが、それが本質ではありません。", "C": "仕事は多くの人と連携して進められます。一人の遅れが、他の人の仕事や会議の開始を遅らせるなど、組織全体の生産性に影響を与えます。時間を守ることは、他者への配慮であり、信頼関係の基本です。", "D": "時間を守ることは残業削減につながる可能性がありますが、直接の目的ではありません。" } },
            { "id": 82, "question": "ヒヤリ・ハット活動の目的は何ですか？", "options": { "A": "事故が起きた原因を究明する", "B": "作業中に危険な状態や行動があったことを体験・報告し、再発防止につなげる", "C": "危険な作業を中止させる", "D": "災害時の緊急対応訓練を行う" }, "answer": "B", "explanations": { "A": "事故が起きた後の原因究明は「災害調査」です。", "B": "ヒヤリ・ハット活動の目的は、幸い事故には至らなかったものの「ヒヤリとした」「ハッとした」危険な体験を報告・共有し、その原因を分析・対策することで、重大な事故を未然に防ぐことです。", "C": "危険な作業の中止は対策の一つですが、活動の目的そのものではありません。", "D": "緊急対応訓練は、災害発生時のための訓練です。" } },
            { "id": 83, "question": "「製品（サービスや製品）」の定義で最も適切なものはどれですか？", "options": { "A": "製造業で生産されるものだけを指す", "B": "顧客に提供され、顧客が生産物を生み出すもの", "C": "企業内部で完結するすべての生産物", "D": "物理的な形を持つものだけを指す" }, "answer": "B", "explanations": { "A": "サービス業が提供する無形のサービスも「製品」に含まれます。", "B": "品質管理における「製品」とは、有形・無形を問わず、顧客に提供されるアウトプット全般を指します。", "C": "企業内部で使われる中間製品なども含まれますが、最終的に顧客に提供されるものが中心です。", "D": "サービスのような物理的な形を持たないものも含まれます。" } },
            { "id": 84, "question": "品質管理における「課題」の定義で最も適切なものはどれですか？", "options": { "A": "解決できない問題", "B": "設定した目標と現実との間に存在するギャップ", "C": "顧客からの苦情", "D": "達成済みの目標" }, "answer": "B", "explanations": { "A": "解決できないとは限りません。", "B": "課題とは、「あるべき姿」や「設定した目標」と、「現状（現実）」との間に存在する差（ギャップ）のことです。このギャップを埋めることが課題解決です。", "C": "顧客からの苦情は、課題を発見するきっかけの一つです。", "D": "達成済みの目標は課題ではありません。" } },
            { "id": 85, "question": "検査の結果、仕様や規格に合致しない製品やサービスを何と呼びますか？", "options": { "A": "良品", "B": "不適合品", "C": "不良品", "D": "返品" }, "answer": "B", "explanations": { "A": "良品は、仕様や規格に合致したものです。", "B": "不適合品は、定められた要求事項を満たしていない製品やサービスを指す公式な用語です。", "C": "不良品は不適合品とほぼ同義で使われますが、JISなどでは「不適合品」という用語が使われます。", "D": "返品は、顧客から返された製品であり、不適合品である場合が多いです。" } },
            { "id": 86, "question": "QCサークル活動の目的として最も適切なものはどれですか？", "options": { "A": "従業員の給与を上げる", "B": "品質管理活動の一環として、職場の問題解決や改善を自発的に行う", "C": "企業間の競争に勝つ", "D": "新規顧客を獲得する" }, "answer": "B", "explanations": { "A": "活動の成果が給与に反映されることはあるかもしれませんが、直接の目的ではありません。", "B": "QCサークル活動は、従業員が自己啓発や相互啓発を図りながら、QC七つ道具などの手法を用いて、自らの職場の問題解決や改善を自発的に行う小集団活動です。", "C": "競争に勝つことは企業全体の目標であり、QCサークル活動はその一助となります。", "D": "新規顧客の獲得は主に営業活動の目標です。" } },
            { "id": 87, "question": "ロットの定義で最も適切なものはどれですか？", "options": { "A": "個々の製品", "B": "同じ条件下で生産された、または生産されたと思われる製品の集まり", "C": "不適合品のみの集まり", "D": "顧客への出荷単位" }, "answer": "B", "explanations": { "A": "ロットは製品の集まりです。", "B": "ロットとは、同じ原材料、同じ機械、同じ作業方法など、同じ条件下で生産された製品の集まりのことです。ロット内の製品は均質な品質を持つと仮定されるため、抜取検査の単位として重要です。", "C": "不適合品だけでなく、良品もロットに含まれます。", "D": "出荷単位とロットが一致する場合もありますが、必ずしもそうとは限りません。" } },
            { "id": 88, "question": "測定値のばらつきの程度を示す尺度で、平均からの偏差の二乗の平均を何と呼びますか？", "options": { "A": "範囲", "B": "中央値", "C": "分散", "D": "標準偏差" }, "answer": "C", "explanations": { "A": "範囲は最大値と最小値の差です。", "B": "中央値はデータの中心を示す尺度です。", "C": "分散は、各データが平均値からどれだけ離れているか（偏差）を二乗し、それらを平均した値です。ばらつきの大きさを表す重要な尺度です。", "D": "標準偏差は、分散の正の平方根です。分散と同じくばらつきの尺度ですが、元のデータと単位が同じになるため、より直感的に理解しやすいです。" } },
            { "id": 89, "question": "異常の原因のうち、一時的で偶然に発生し、根本的な対策を必要としない原因を何と呼びますか？", "options": { "A": "系統原因", "B": "偶然原因", "C": "管理不能原因", "D": "突発原因" }, "answer": "B", "explanations": { "A": "系統原因という用語は一般的ではありません。", "B": "偶然原因は、管理された工程でも避けられない、多数の細かい要因によるわずかなばらつきの原因です。通常は放置され、個別の対策は行われません。", "C": "管理不能とは限りません。", "D": "突発原因は異常原因に近い概念です。" } },
            { "id": 90, "question": "異常の原因のうち、特定の要因によって発生し、根本的な対策が必要な原因を何と呼びますか？", "options": { "A": "偶然原因", "B": "異常原因（特殊原因）", "C": "一時原因", "D": "自然原因" }, "answer": "B", "explanations": { "A": "偶然原因は、対策が不要なばらつきの原因です。", "B": "異常原因（特殊原因）は、作業者のミス、機械の故障、材料の異変など、特定の原因によって発生する、放置できない大きなばらつきの原因です。原因を特定し、再発防止策を講じる必要があります。", "C": "一時原因という用語は一般的ではありません。", "D": "自然原因という用語は一般的ではありません。" } },
            { "id": 91, "question": "職場において、整理、整頓、清掃、清潔、躾（しつけ）の5つのSを推進する活動は何ですか？", "options": { "A": "5ゲン主義", "B": "5W1H", "C": "5S活動", "D": "ほうれんそう" }, "answer": "C", "explanations": { "A": "5ゲン主義は問題解決の考え方です。", "B": "5W1Hは情報整理のフレームワークです。", "C": "5S活動は、整理（不要な物を捨てる）、整頓（必要な物を使いやすく置く）、清掃（きれいに掃除する）、清潔（きれいな状態を保つ）、躾（ルールを守る習慣をつける）の5つを推進し、安全で効率的な職場を作る活動です。", "D": "ほうれんそうはコミュニケーションの基本です。" } },
            { "id": 92, "question": "品質管理の基本知識で、データの種類を大きく分類すると何と何がありますか？", "options": { "A": "定性的データと定量的データ", "B": "計量値データと計数値データ", "C": "連続データと離散データ", "D": "一次データと二次データ" }, "answer": "B", "explanations": { "A": "定性的・定量的もデータの分類ですが、QCでよく使われるのは計量値・計数値です。", "B": "品質管理で扱う数値データは、長さや重さなどの「計量値データ」と、不良品の数などの「計数値データ」に大別されます。それぞれで用いる分析手法が異なります。", "C": "連続・離散は計量値・計数値とほぼ同じ意味合いです。", "D": "一次・二次はデータの入手方法による分類です。" } },
            { "id": 93, "question": "品質管理検定4級の学習を通じて、個人として身につけるべきことの最終目標は何ですか？", "options": { "A": "高度な統計解析能力", "B": "組織のトップリーダーになること", "C": "社会人としての基礎的な素養を習得し、より良い製品づくりに貢献すること", "D": "特定の専門分野で深く掘り下げること" }, "answer": "C", "explanations": { "A": "高度な統計解析は、より上位の級で求められます。", "B": "トップリーダーになることも目標の一つかもしれませんが、4級の直接の目標ではありません。", "C": "QC検定4級は、品質管理の基本的な考え方や手法を学び、社会人としての基礎的な素養を身につけ、日々の業務で品質向上に貢献できる人材になることを目的としています。", "D": "専門分野を深く掘り下げるのは、より上位の級や他の専門資格の役割です。" } },
            { "id": 94, "question": "管理図における中心線（CL）は何を示しますか？", "options": { "A": "上側管理限界", "B": "下側管理限界", "C": "工程の平均値または目標値", "D": "異常なばらつき" }, "answer": "C", "explanations": { "A": "上側管理限界（UCL）は、ばらつきの上限を示す線です。", "B": "下側管理限界（LCL）は、ばらつきの下限を示す線です。", "C": "中心線（CL: Center Line）は、管理図の中心に引かれる線で、工程が安定している場合のデータの平均値や、目標とする値を示します。", "D": "異常なばらつきは、点が管理限界線を超えることなどで示されます。" } },
            { "id": 95, "question": "組織がより良い製品やサービスを作り出すために、品質の考え方や管理の進め方に関して理解を深めることが求められる目的は何ですか？", "options": { "A": "利益の最大化", "B": "競合他社に勝つため", "C": "組織活動のすべての段階で人々の生活を支えるため", "D": "技術革新を推進するため" }, "answer": "C", "explanations": { "A": "利益の最大化は結果であり、より根源的な目的があります。", "B": "競争に勝つことも重要ですが、より広い視点での目的が問われています。", "C": "品質管理は、単に企業の利益のためだけでなく、安全で信頼性の高い製品・サービスを通じて、社会や人々の生活を豊かにし、支えるという大きな目的を持っています。", "D": "技術革新は品質向上の手段の一つです。" } },
            { "id": 96, "question": "QC検定4級の「手引き」では、品質管理活動がどのような分野に適用されると述べられていますか？", "options": { "A": "製造業のみ", "B": "サービス業のみ", "C": "企業、組織、病院、学校、スーパーマーケットなど、あらゆる組織活動", "D": "IT産業のみ" }, "answer": "C", "explanations": { "A": "製造業は品質管理が発展した分野ですが、それだけに限定されません。", "B": "サービス業でも品質管理は非常に重要です。", "C": "品質管理の考え方や手法は、製造業やサービス業だけでなく、病院、学校、行政など、製品やサービスを提供するあらゆる組織活動に適用できる普遍的なものです。", "D": "IT産業でも品質管理は重要ですが、それだけに限定されません。" } },
            { "id": 97, "question": "品質管理検定の目的の一つとして、品質管理活動を通じて何を向上させることが挙げられていますか？", "options": { "A": "会社の知名度", "B": "個人の給与", "C": "製品やサービスの品質維持・改善", "D": "競合他社の売上" }, "answer": "C", "explanations": { "A": "知名度向上は結果として期待できますが、直接の目的ではありません。", "B": "個人の給与向上も結果として期待できますが、直接の目的ではありません。", "C": "品質管理検定の目的は、品質管理に関する知識の普及を通じて、個人の能力向上を図り、それによって組織における製品・サービスの品質維持・改善を推進することです。", "D": "競合他社の売上を向上させることは目的ではありません。" } },
            { "id": 98, "question": "品質を向上させ続けるための活動は、組織に所属するすべての人々がどのように関わるべきですか？", "options": { "A": "特定の専門家のみが担当する", "B": "経営層のみが意思決定を行う", "C": "すべての人が品質管理を徹底し、意識向上も含む", "D": "品質管理部門のみが活動する" }, "answer": "C", "explanations": { "A": "専門家は重要な役割を果たしますが、品質は全員で作り込むものです。", "B": "経営層のリーダーシップは不可欠ですが、実行するのは現場の全員です。", "C": "今日の品質管理は「全員参加の品質管理（TQC/TQM）」が基本です。品質は特定の部門だけでなく、組織に所属するすべての人がそれぞれの持ち場で品質意識を持ち、改善活動に参加することで達成されます。", "D": "品質管理部門は、品質活動を推進・支援する役割を担いますが、品質を作り込むのは全部門の役割です。" } },
            { "id": 99, "question": "品質管理において、「不適合品」とは何ですか？", "options": { "A": "顧客の期待を超えた製品", "B": "要求事項を満たしていないこと", "C": "高価な製品", "D": "欠陥がない製品" }, "answer": "B", "explanations": { "A": "顧客の期待を超えた製品は、魅力品質を持つ優れた製品です。", "B": "不適合とは、製品、プロセス、またはシステムが、定められた要求事項を満たしていない状態を指します。不適合な製品が「不適合品」です。", "C": "価格の高さは品質とは直接関係ありません。", "D": "欠陥がない製品は「適合品」または「良品」です。" } },
            { "id": 100, "question": "品質管理の基本的な考え方や手法が日本中で活用されることを目指すのは、どのような人材の育成のためですか？", "options": { "A": "海外で活躍するグローバル人材", "B": "経営戦略を策定する人材", "C": "品質管理の重要な資源としての人材を大きく成長させる有効な方法", "D": "新しい技術を開発する研究者" }, "answer": "C", "explanations": { "A": "品質管理の知識はグローバル人材にも必要ですが、それが主目的ではありません。", "B": "品質管理は経営戦略の重要な要素ですが、人材育成の目的はより広範です。", "C": "品質管理活動は、論理的思考力や問題解決能力を養うため、組織の最も重要な資源である「人」を成長させる非常に有効な方法と考えられています。その普及が目的です。", "D": "研究者にも品質管理の知識は必要ですが、対象はそれだけに限りません。" } }
        ];

        let currentQuestions = [];
        let userAnswers = {};
        let lastQuizQuestionIds = []; // To store IDs of questions from the last quiz

        const quizContainer = document.getElementById('quiz-container');
        const resultContainer = document.getElementById('result-container');
        const startScreen = document.getElementById('start-screen');
        const buttonContainer = document.getElementById('button-container');

        const startRandomBtn = document.getElementById('start-random-btn');
        const startAllBtn = document.getElementById('start-all-btn');
        const submitBtn = document.getElementById('submit-btn');
        const retryBtn = document.getElementById('retry-btn');
        const allQuestionsBtn = document.getElementById('all-questions-btn');
        const pdfBtn = document.getElementById('pdf-btn');
        const csvBtn = document.getElementById('csv-btn');

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        function showStartScreen() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
            quizContainer.classList.add('hidden');
            resultContainer.classList.add('hidden');
            buttonContainer.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }

        function startQuiz(mode) {
            // Scroll to the top of the page smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Reset state
            userAnswers = {};
            resultContainer.innerHTML = '';
            
            // UI visibility
            startScreen.classList.add('hidden');
            resultContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            buttonContainer.classList.remove('hidden');
            submitBtn.classList.remove('hidden');
            retryBtn.classList.add('hidden');
            allQuestionsBtn.classList.add('hidden');
            pdfBtn.classList.add('hidden');
            csvBtn.classList.add('hidden');

            if (mode === 'all') {
                currentQuestions = [...allQuestions];
            } else { // Default to 5 random questions
                let availableQuestions = allQuestions.filter(q => !lastQuizQuestionIds.includes(q.id));
                if (availableQuestions.length < 5) {
                    availableQuestions = [...allQuestions];
                    availableQuestions = availableQuestions.filter(q => !lastQuizQuestionIds.includes(q.id));
                    if (availableQuestions.length < 5) {
                         availableQuestions = [...allQuestions];
                    }
                }
                shuffleArray(availableQuestions);
                currentQuestions = availableQuestions.slice(0, 5);
                lastQuizQuestionIds = currentQuestions.map(q => q.id);
            }

            displayQuestions();
        }

        function displayQuestions() {
            quizContainer.innerHTML = '';
            currentQuestions.forEach((q, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'question-card p-6 rounded-lg mb-6 shadow-lg';
                
                let optionsHtml = '';
                for (const key in q.options) {
                    optionsHtml += `
                        <div>
                            <input type="radio" name="question${q.id}" id="q${q.id}_${key}" value="${key}" class="hidden">
                            <label for="q${q.id}_${key}" class="option-label block p-4 rounded-lg cursor-pointer">
                                <span class="font-bold mr-2">${key}.</span> ${q.options[key]}
                            </label>
                        </div>
                    `;
                }

                questionElement.innerHTML = `
                    <h3 class="text-xl font-bold mb-4 text-gray-100">${index + 1}. ${q.question}</h3>
                    <div class="space-y-3">${optionsHtml}</div>
                `;
                quizContainer.appendChild(questionElement);
            });

            // Add event listeners for radio buttons
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const questionId = e.target.name.replace('question', '');
                    userAnswers[questionId] = e.target.value;
                });
            });
        }

        function submitAnswers() {
            // Scroll to top to show the results immediately
            window.scrollTo({ top: 0, behavior: 'smooth' });

            let score = 0;
            quizContainer.classList.add('hidden');
            resultContainer.classList.remove('hidden');
            resultContainer.innerHTML = '';

            // Create and append summary
            const summaryElement = document.createElement('div');
            summaryElement.id = 'result-summary';
            summaryElement.className = 'p-6 rounded-lg text-center text-white shadow-xl mb-8';
            
            // Calculate score first
            currentQuestions.forEach(q => {
                if (userAnswers[q.id] === q.answer) {
                    score++;
                }
            });

            let summaryMessage = '';
            const percentage = (score / currentQuestions.length) * 100;
            if (percentage === 100) {
                summaryMessage = '素晴らしいです！全問正解です！';
            } else if (percentage >= 80) {
                summaryMessage = '優秀です！あと一歩でした。';
            } else if (percentage >= 60) {
                summaryMessage = '良い調子です。復習して完璧を目指しましょう。';
            } else {
                summaryMessage = 'お疲れ様でした。解説を読んでしっかり復習しましょう。';
            }

            summaryElement.innerHTML = `
                <h2 class="text-3xl font-bold font-serif mb-2">結果</h2>
                <p class="text-5xl font-bold mb-4">${score} / ${currentQuestions.length}</p>
                <p class="text-xl">${summaryMessage}</p>
            `;
            resultContainer.appendChild(summaryElement);

            // Display individual results
            currentQuestions.forEach((q, index) => {
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.answer;
                
                const resultElement = document.createElement('div');
                resultElement.className = `result-card p-6 rounded-lg mb-6 shadow-lg ${isCorrect ? 'result-correct' : 'result-incorrect'}`;

                let optionsHtml = '';
                for (const key in q.options) {
                    let optionClass = 'text-gray-300';
                    let indicator = '';
                    if (key === q.answer) {
                        optionClass = 'text-green-300 font-bold';
                        indicator = ' (正解)';
                    }
                    if (key === userAnswer && !isCorrect) {
                        optionClass = 'text-red-300 line-through';
                        indicator = ' (あなたの回答)';
                    }
                     if (key === userAnswer && isCorrect) {
                        indicator = ' (正解・あなたの回答)';
                    }
                    optionsHtml += `<li class="${optionClass}">${key}. ${q.options[key]}${indicator}</li>`;
                }

                // Build explanation HTML
                let explanationHtml = '';
                // If the answer is incorrect and an explanation for the chosen answer exists
                if (!isCorrect && userAnswer && q.explanations[userAnswer]) {
                    explanationHtml += `
                        <div class="incorrect-explanation p-4 rounded-md mt-4">
                            <h4 class="font-bold text-lg text-red-300">あなたが選んだ回答「${userAnswer}」の解説</h4>
                            <p class="mt-2 text-gray-300">${q.explanations[userAnswer]}</p>
                        </div>
                    `;
                }

                // Always show the correct answer's explanation
                explanationHtml += `
                    <div class="explanation p-4 rounded-md mt-4">
                        <h4 class="font-bold text-lg text-yellow-400">正解「${q.answer}」の解説</h4>
                        <p class="mt-2 text-gray-300">${q.explanations[q.answer]}</p>
                    </div>
                `;

                resultElement.innerHTML = `
                    <h3 class="text-xl font-bold mb-4">${index + 1}. ${q.question}</h3>
                    <ul class="list-none space-y-2 mb-4">${optionsHtml}</ul>
                    ${explanationHtml}
                `;
                resultContainer.appendChild(resultElement);
            });

            // Update buttons
            submitBtn.classList.add('hidden');
            retryBtn.classList.remove('hidden');
            allQuestionsBtn.classList.remove('hidden');
            pdfBtn.classList.remove('hidden');
            csvBtn.classList.remove('hidden');
        }

        function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add custom font
            // NOTE: jsPDF requires the font to be available. For simplicity, we'll use a standard font.
            // For full Japanese support, a more complex setup with font files is needed.
            // This example will use standard fonts, which may not render Japanese characters correctly without a proper setup.
            // A workaround is to draw text on a canvas and add it as an image, but that's complex.
            // Let's try to add a font that might support Japanese.
            doc.addFont('NotoSansJP-Regular.ttf', 'NotoSansJP', 'normal');
            doc.setFont('NotoSansJP');


            let y = 20;
            const pageHeight = doc.internal.pageSize.height;
            const margin = 15;

            // Header
            doc.setFontSize(20);
            doc.text("QC検定4級 学習結果レポート", margin, y);
            y += 15;

            // Summary
            const score = currentQuestions.filter(q => userAnswers[q.id] === q.answer).length;
            doc.setFontSize(12);
            doc.text(`総合成績: ${score} / ${currentQuestions.length} 問正解`, margin, y);
            y += 10;

            currentQuestions.forEach((q, index) => {
                const userAnswer = userAnswers[q.id] || "未回答";
                const isCorrect = userAnswer === q.answer;
                const resultText = isCorrect ? "正解" : "不正解";

                const questionText = `${index + 1}. ${q.question}`;
                const answerText = `あなたの回答: ${userAnswer} (${resultText}) | 正解: ${q.answer}`;
                
                let explanationText = `正解の解説: ${q.explanations[q.answer]}`;
                if(!isCorrect && userAnswer && q.explanations[userAnswer]) {
                    explanationText = `選んだ回答の解説: ${q.explanations[userAnswer]}\n${explanationText}`;
                }
                
                const questionLines = doc.splitTextToSize(questionText, 180);
                const answerLines = doc.splitTextToSize(answerText, 180);
                const explanationLines = doc.splitTextToSize(explanationText, 180);
                
                const blockHeight = (questionLines.length + answerLines.length + explanationLines.length) * 7 + 10;

                if (y + blockHeight > pageHeight - margin) {
                    doc.addPage();
                    y = margin;
                }

                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text(questionLines, margin, y);
                y += questionLines.length * 7;

                doc.setFont(undefined, 'normal');
                doc.text(answerLines, margin, y);
                y += answerLines.length * 7;

                doc.setTextColor(100);
                doc.text(explanationLines, margin, y);
                y += explanationLines.length * 7 + 10;
                doc.setTextColor(0);
            });
            
            // Unfortunately, jsPDF's built-in font support for Japanese is limited.
            // The output might not be perfect without embedding a proper CJK font.
            // We'll add a note about this limitation.
            doc.save("QC検定_学習結果.pdf");
        }

        function exportToCSV() {
            let csvContent = "data:text/csv;charset=utf-8,\uFEFF"; // \uFEFF for BOM
            csvContent += "問題番号,問題文,あなたの回答,正解,正誤,選んだ回答の解説,正解の解説\r\n";

            currentQuestions.forEach((q, index) => {
                const userAnswer = userAnswers[q.id] || "未回答";
                const isCorrect = userAnswer === q.answer;
                const resultText = isCorrect ? "正解" : "不正解";
                
                const incorrectExplanation = (!isCorrect && userAnswer && q.explanations[userAnswer]) ? q.explanations[userAnswer] : "";
                const correctExplanation = q.explanations[q.answer];

                const row = [
                    index + 1,
                    `"${q.question.replace(/"/g, '""')}"`,
                    userAnswer,
                    q.answer,
                    resultText,
                    `"${incorrectExplanation.replace(/"/g, '""')}"`,
                    `"${correctExplanation.replace(/"/g, '""')}"`
                ].join(',');
                csvContent += row + "\r\n";
            });

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "QC検定_学習結果.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Event Listeners
        submitBtn.addEventListener('click', submitAnswers);
        startRandomBtn.addEventListener('click', () => startQuiz(5));
        startAllBtn.addEventListener('click', () => startQuiz('all'));
        retryBtn.addEventListener('click', () => startQuiz(5));
        allQuestionsBtn.addEventListener('click', () => startQuiz('all'));
        pdfBtn.addEventListener('click', exportToPDF);
        csvBtn.addEventListener('click', exportToCSV);

        // Initial load
        window.onload = showStartScreen;
    </script>
</body>
</html>

